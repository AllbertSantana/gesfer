<div class="absolute w-full h-full">

    <div class="max-w-7xl h-full mx-auto flex flex-col">

        <div class="py-2 2xl:px-0 flex flex-row justify-between items-center gap-4">

            <div class="hidden md:inline">
                <button mat-stroked-button (click)="openFilterDialog()" matBadge="&#8288;" matBadgeSize="small" matBadgeColor="accent" [matBadgeHidden]="!hasFilter">
                    <div class="flex flex-row justify-center items-center gap-1">
                        <mat-icon fontIcon="filter_alt"></mat-icon>
                        <span class="leading-normal">Filtrar</span>
                    </div>
                </button>
            </div>
            <div class="inline md:hidden">
                <button mat-icon-button (click)="openFilterDialog()">
                    <mat-icon matBadge="&#8288;" matBadgeSize="small" matBadgeColor="accent" [matBadgeHidden]="!hasFilter">filter_alt</mat-icon>
                </button>
            </div>

           <div class="flex flex-row justify-end gap-4">

                <div class="hidden md:inline">
                    <button
                        *ngIf="selectedRows.size === 1"
                        mat-stroked-button
                        routerLink="{{getRowSelection()[0].id.toString()}}/exercicios"
                    >
                        <div class="flex flex-row justify-center items-center gap-1">
                            <mat-icon fontIcon="work_history"></mat-icon>
                            <span class="leading-normal">Exercícios</span>
                        </div>
                    </button>
                </div>
                <div class="inline md:hidden">
                    <button mat-icon-button *ngIf="selectedRows.size === 1" routerLink="{{getRowSelection()[0].id.toString()}}/exercicios">
                        <mat-icon>work_history</mat-icon>
                    </button>
                </div>

                <div class="hidden md:inline">
                    <button
                        *ngIf="selectedRows.size === 1"
                        mat-stroked-button
                        routerLink="{{getRowSelection()[0].id.toString()}}/editar"
                    >
                        <div class="flex flex-row justify-center items-center gap-1">
                            <mat-icon fontIcon="edit"></mat-icon>
                            <span class="leading-normal">Editar</span>
                        </div>
                    </button>
                </div>
                <div class="inline md:hidden">
                    <button mat-icon-button *ngIf="selectedRows.size === 1" routerLink="{{getRowSelection()[0].id.toString()}}/editar">
                        <mat-icon>edit</mat-icon>
                    </button>
                </div>

                <div class="hidden md:inline">
                    <button
                        *ngIf="selectedRows.size > 0"
                        mat-stroked-button
                        [matBadgeHidden]="selectedRows.size === 1"
                        [matBadge]="selectedRows.size"
                        matBadgeColor="warn"
                        color="warn"
                        (click)="openRemoveDialog()"
                    >
                        <div class="flex flex-row justify-center items-center gap-1">
                            <mat-icon color="warn" fontIcon="delete"></mat-icon>
                            <span class="leading-normal">Remover</span>
                        </div>
                    </button>
                </div>
                <div class="inline md:hidden">
                    <button mat-icon-button color="warn" *ngIf="selectedRows.size > 0" (click)="openRemoveDialog()">
                        <mat-icon
                            [matBadgeHidden]="selectedRows.size === 1"
                            [matBadge]="selectedRows.size"
                            matBadgeColor="warn"
                        >
                            delete
                        </mat-icon>
                    </button>
                </div>

                <div class="hidden md:inline">
                    <button mat-stroked-button color="primary" routerLink="adicionar">
                        <div class="flex flex-row justify-center items-center gap-1">
                            <mat-icon fontIcon="add"></mat-icon>
                            <span class="leading-normal">Adicionar</span>
                        </div>
                    </button>
                </div>
                <div class="inline md:hidden">
                    <button mat-icon-button color="primary" routerLink="adicionar">
                        <mat-icon>add</mat-icon>
                    </button>
                </div>

           </div>
        </div>
    
        <mat-divider></mat-divider>
    
        <div class="relative h-full overflow-auto flex flex-col justify-between">
    
            <div class="relative grow overflow-auto">

                <table
                    class="mat-elevation-z0"
                    mat-table
                    matSort
                    matSortActive="nome"
                    matSortDirection="asc"
                    matSortDisableClear
                    [dataSource]="dataSource">
        
                    <ng-container matColumnDef="matricula">
                        <th mat-header-cell *matHeaderCellDef>Matrícula</th>
                        <td mat-cell *matCellDef="let funcionario">{{ funcionario.matricula }}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="cpf">
                        <th mat-header-cell *matHeaderCellDef>CPF</th>
                        <td mat-cell *matCellDef="let funcionario">{{ funcionario.cpf }}</td>
                    </ng-container>
                
                    <ng-container matColumnDef="nome">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nome</th>
                        <td mat-cell *matCellDef="let funcionario">{{ funcionario.nome }}</td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr
                        mat-row
                        class="cursor-pointer hover:!bg-[#0000000a]"
                        (click)="onRowSelect(row)"
                        [class.row-is-clicked]="selectedRows.has(row.id)"
                        *matRowDef="let row; columns: displayedColumns"
                    >
                    </tr>
        
                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="3">
                            <div class="flex flex-col justify-center">
                                <h1 class="text-center text-black/[0.5]" *ngIf="!(dataSource.loading$ | async)">Nenhum funcionário encontrado</h1>
                                <h1 class="text-center text-black/[0.5]" *ngIf="dataSource.loading$ | async">Carregando...</h1>
                            </div>
                        </td>
                    </tr>
        
                </table>

            </div>
    
            <div>
                <mat-paginator
                    [length]="funcionariosLength$ | async"
                    [pageSize]="pageSize"
                    [pageSizeOptions]="pageSizeOptions"
                    [showFirstLastButtons]="true"
                >
                </mat-paginator>
            </div>
    
        </div>

    </div>

</div>

<div 
    class="absolute bg-black/20 z-[100] flex items-center justify-center w-full h-full"
    *ngIf="dataSource.loading$ | async"
>
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>

<!-- TABLE WITH SPLIT CELL ------------------------------------------------------------------------- -->

<!-- TS -->
<!-- 
import {Component} from '@angular/core';

interface Transaction {
  name: string;
  dateStart: string;
  dateEnd: string;
}

@Component({
  selector: 'table-multiple-header-footer-example',
  styleUrls: ['table-multiple-header-footer-example.css'],
  templateUrl: 'table-multiple-header-footer-example.html',
})
export class TableMultipleHeaderFooterExample {
  displayedColumns: string[] = ['name', 'dateStart', 'dateEnd'];
  transactions: Transaction[] = [
    { name: 'a', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
    { name: 'b', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
    { name: 'c', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
    { name: 'd', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
    { name: 'e', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
    { name: 'f', dateStart: '2022-12-01', dateEnd: '2022-12-05' },
  ];
} 
-->

<!-- HTML -->
<!-- 
<table mat-table matSort [dataSource]="transactions" class="mat-elevation-z8">

    <ng-container matColumnDef="nome up">
        <th mat-header-cell *matHeaderCellDef></th>
    </ng-container>

    <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nome</th>
    <td mat-cell *matCellDef="let transaction"> {{transaction.name}} </td>
    </ng-container>

    <ng-container matColumnDef="data">
    <th mat-header-cell *matHeaderCellDef colspan="2"> Data </th>
    </ng-container>

    <ng-container matColumnDef="dateStart">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Inicial </th>
    <td mat-cell *matCellDef="let transaction"> {{transaction.dateStart}} </td>
    </ng-container>

    <ng-container matColumnDef="dateEnd">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Final </th>
    <td mat-cell *matCellDef="let transaction"> {{transaction.dateEnd}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['nome up', 'data']"></tr>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

</table> 
-->